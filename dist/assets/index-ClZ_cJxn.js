(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}})();function u(e){const n=document.createElement("a");if(n.href=e.url,n.className="tool-card",e.external&&(n.target="_blank",n.rel="noopener"),e.icon.type==="image"){const t=document.createElement("img");t.src=e.icon.src,t.alt=e.icon.alt,t.className="selector-icon",n.appendChild(t)}else if(e.icon.type==="emoji"){const t=document.createElement("div");t.className="tool-card__logo",t.textContent=e.icon.value,n.appendChild(t)}const o=document.createElement("span");o.className="tool-card__name",o.textContent=e.name,n.appendChild(o);const r=document.createElement("span");return r.className="tool-card__tag",r.textContent=e.tag,n.appendChild(r),n}function h(e){const n=document.createElement("a");n.href=e.url,n.className=`correction-card ${e.class}`;const o=document.createElement("div");o.className="correction-card__icon",o.textContent=e.icon,n.appendChild(o);const r=document.createElement("h3");r.className="correction-card__title",r.textContent=e.name,n.appendChild(r);const t=document.createElement("p");return t.className="correction-card__text",t.textContent=e.description,n.appendChild(t),n}function p(e){const n=document.createElement("a");if(n.href=e.url,n.className=`card card--${e.color}`,e.image){const t=document.createElement("img");t.src=e.image,t.alt=e.title,t.className="card__image",n.appendChild(t)}const o=document.createElement("h3");o.className="card__title",o.textContent=e.title,n.appendChild(o);const r=document.createElement("p");return r.className="card__text",r.textContent=e.description,n.appendChild(r),n}function s(e,n){const r={outils:["name","url","tag","icon"],corrections:["name","url","description","icon"],cours:["title","url","description","color"]}[n];return r?r.every(t=>e[t]!==void 0):!1}async function f(e,n=5e3){const o=new AbortController,r=setTimeout(()=>o.abort(),n);try{const t=await fetch(e,{signal:o.signal});return clearTimeout(r),t}catch(t){throw clearTimeout(r),t}}let i=null;async function g(){try{let e=i;if(!e){const t=await f("/data/links.json");if(!t.ok)throw new Error("Impossible de charger les liens");e=await t.json(),i=e}const n=document.querySelector(".tools-grid");n&&e.outils&&(n.textContent="",e.outils.forEach(t=>{s(t,"outils")?n.appendChild(u(t)):console.warn("Lien outil invalide:",t)}));const o=document.querySelector(".correction-grid");o&&e.corrections&&(o.textContent="",e.corrections.forEach(t=>{s(t,"corrections")?o.appendChild(h(t)):console.warn("Lien correction invalide:",t)}));const r=document.querySelector(".cours-grid");r&&e.cours&&(r.textContent="",e.cours.forEach(t=>{s(t,"cours")?r.appendChild(p(t)):console.warn("Lien cours invalide:",t)}))}catch(e){console.error("Erreur chargement des liens:",e)}}const l=()=>{const e=document.querySelector(".header__menu-btn"),n=document.querySelector(".header__nav");!e||!n||(e.addEventListener("click",()=>{const o=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!o),n.classList.toggle("is-open",!o)}),n.querySelectorAll(".nav__link").forEach(o=>{o.addEventListener("click",()=>{e.setAttribute("aria-expanded","false"),n.classList.remove("is-open")})}),document.addEventListener("click",o=>{!n.contains(o.target)&&!e.contains(o.target)&&(e.setAttribute("aria-expanded","false"),n.classList.remove("is-open"))}))},w=()=>{const e={root:null,rootMargin:"0px",threshold:.1},n=new IntersectionObserver(r=>{r.forEach(t=>{t.isIntersecting&&(t.target.classList.add("is-visible"),n.unobserve(t.target))})},e);document.querySelectorAll(".card, .tool-card, .revision-card, .resource-item").forEach(r=>{r.classList.add("animate-on-scroll"),n.observe(r)})},d=document.createElement("style");d.textContent=`
    /* Animation au scroll */
    .animate-on-scroll {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
    }

    .is-visible {
        opacity: 1 !important;
        transform: translateY(0) !important;
    }

    /* Header shadow au scroll */
    .header.scrolled {
        box-shadow: var(--shadow-md);
    }
`;document.head.appendChild(d);const E=()=>{const e=document.querySelector(".header");e&&window.addEventListener("scroll",()=>{window.pageYOffset>50?e.classList.add("scrolled"):e.classList.remove("scrolled")},{passive:!0})};document.addEventListener("DOMContentLoaded",async()=>{try{l(),w(),setTimeout(()=>{E()},100),await g(),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("ðŸš€ TechnoDocs initialisÃ©")}catch(e){(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.error("Erreur initialisation:",e)}});const m=(e,n)=>{if(!e)return;const t=new DOMParser().parseFromString(n,"text/html").body.firstElementChild;t&&e.replaceWith(t)};async function C(){const e=document.getElementById("header-placeholder");if(e)try{const n=await fetch("/src/includes/header.html");if(!n.ok)throw new Error("Impossible de charger le header");const o=await n.text();m(e,o),l()}catch(n){const o=document.createElement("header");o.className="header";const r=document.createElement("div");r.className="header__container";const t=document.createElement("p");t.textContent="Erreur de chargement",r.appendChild(t),o.appendChild(r),e.replaceWith(o),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.error("Erreur header:",n)}}async function y(){const e=document.getElementById("footer-placeholder");if(e)try{const n=await fetch("/src/includes/footer.html");if(!n.ok)throw new Error("Impossible de charger le footer");const o=await n.text();m(e,o)}catch(n){const o=document.createElement("footer");o.className="footer";const r=document.createElement("p");r.textContent="Erreur de chargement",o.appendChild(r),e.replaceWith(o),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.error("Erreur footer:",n)}}async function v(){await Promise.all([C(),y()])}document.addEventListener("DOMContentLoaded",async()=>{await v()});
