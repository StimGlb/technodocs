<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>⚙ TechnoDocs — Dev Index</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --bg:#0c0c0f;--surface:#16161a;--border:#2a2a32;
            --text:#e2e2e8;--muted:#6e6e80;--accent:#6366f1;
            --accent-dim:#6366f133;--green:#22c55e;--green-dim:#22c55e20;
            --orange:#f59e0b;--orange-dim:#f59e0b20;--red:#ef4444;
            --mono:'JetBrains Mono','Fira Code','SF Mono',monospace;
            --sans:'Inter',system-ui,sans-serif;
        }
        body{background:var(--bg);color:var(--text);font-family:var(--sans);min-height:100vh;padding:2rem}

        /* Header */
        .dev-header{
            display:flex;align-items:center;gap:.75rem;
            padding-bottom:1.5rem;border-bottom:1px solid var(--border);margin-bottom:2rem;
        }
        .dev-header__badge{
            background:var(--accent-dim);color:var(--accent);
            font-family:var(--mono);font-size:.7rem;font-weight:600;
            padding:.25rem .6rem;border-radius:4px;letter-spacing:.05em;text-transform:uppercase;
        }
        .dev-header h1{font-size:1.1rem;font-weight:500;color:var(--muted)}
        .dev-header h1 span{color:var(--text);font-weight:600}

        /* Stats bar */
        .dev-stats{
            display:flex;gap:1.5rem;margin-bottom:2rem;font-family:var(--mono);font-size:.75rem;
        }
        .dev-stats__item{color:var(--muted)}
        .dev-stats__item strong{color:var(--text)}

        /* Filter */
        .dev-filter{
            display:flex;gap:.5rem;align-items:center;margin-bottom:1.5rem;
        }
        .dev-filter input{
            background:var(--surface);border:1px solid var(--border);border-radius:6px;
            color:var(--text);font-family:var(--mono);font-size:.8rem;
            padding:.5rem .75rem;width:100%;max-width:360px;outline:none;
            transition:border-color .2s;
        }
        .dev-filter input:focus{border-color:var(--accent)}
        .dev-filter input::placeholder{color:var(--muted)}
        .dev-filter__hint{font-size:.7rem;color:var(--muted);font-family:var(--mono)}

        /* Links list */
        .dev-section{margin-bottom:2.5rem}
        .dev-section__title{
            font-family:var(--mono);font-size:.7rem;font-weight:600;
            color:var(--muted);text-transform:uppercase;letter-spacing:.08em;
            margin-bottom:.75rem;padding-left:.25rem;
        }
        .dev-list{list-style:none;display:flex;flex-direction:column;gap:2px}
        .dev-link{
            display:flex;align-items:center;gap:.75rem;
            padding:.6rem .75rem;border-radius:6px;
            text-decoration:none;color:var(--text);
            font-family:var(--mono);font-size:.8rem;
            transition:background .15s,transform .1s;
        }
        .dev-link:hover{background:var(--surface);transform:translateX(4px)}
        .dev-link__status{
            width:8px;height:8px;border-radius:50%;flex-shrink:0;
        }
        .dev-link__status--wip{background:var(--orange)}
        .dev-link__status--ready{background:var(--green)}
        .dev-link__status--broken{background:var(--red)}
        .dev-link__path{color:var(--muted);margin-left:auto;font-size:.7rem}
        .dev-link__tag{
            font-size:.6rem;padding:.15rem .4rem;border-radius:3px;
            text-transform:uppercase;letter-spacing:.04em;font-weight:600;
        }
        .dev-link__tag--wip{background:var(--orange-dim);color:var(--orange)}
        .dev-link__tag--new{background:var(--green-dim);color:var(--green)}

        /* Hidden by filter */
        .dev-link.hidden{display:none}
        .dev-section.hidden{display:none}

        /* Footer */
        .dev-footer{
            margin-top:3rem;padding-top:1.5rem;border-top:1px solid var(--border);
            font-family:var(--mono);font-size:.65rem;color:var(--muted);
            display:flex;justify-content:space-between;
        }
        .dev-footer a{color:var(--accent);text-decoration:none}
        .dev-footer a:hover{text-decoration:underline}

        /* Responsive */
        @media(max-width:640px){
            body{padding:1rem}
            .dev-link__path{display:none}
            .dev-stats{flex-wrap:wrap;gap:.75rem}
        }
    </style>
</head>
<body>

<header class="dev-header">
    <span class="dev-header__badge">dev</span>
    <h1><span>TechnoDocs</span> — Pages Index</h1>
</header>

<div class="dev-stats" id="devStats"></div>

<div class="dev-filter">
    <input type="text" id="filterInput" placeholder="Filtrer les pages…" autofocus>
    <span class="dev-filter__hint">↑↓ naviguer · Enter ouvrir</span>
</div>

<div id="devContent"></div>

<footer class="dev-footer">
    <span>Fichier local uniquement — <code>noindex</code></span>
    <a href="/">← Retour au site</a>
</footer>

<script>
/**
 * ═══════════════════════════════════════════════════════════════
 *  DEV PAGES REGISTRY
 *  Ajoute tes pages ici. 
 *  status: "wip" | "ready" | "broken"
 *  tag: "new" | "wip" | null
 * ═══════════════════════════════════════════════════════════════
 */
const PAGES = [
    // ── Cours ──────────────────────────────────────────────
    { section: "Cours", name: "Conception 3D", path: "/src/pages/cours/conception-3d.html", status: "ready" },
    { section: "Cours", name: "Modélisation 3D", path: "/src/pages/cours/modelisation3d.html", status: "ready" },
    { section: "Cours", name: "Réparabilité", path: "/src/pages/cours/reparabilite.html", status: "ready" },

    // ── Activités ──────────────────────────────────────────
    { section: "Activités", name: "Devoirs (index)", path: "/src/pages/activites/devoirs.html", status: "ready" },
    { section: "Activités", name: "Présentation objet technique", path: "/src/pages/activites/presentation-objet-technique.html", status: "ready" },

    // ── Corrections ────────────────────────────────────────
    { section: "Corrections", name: "Index corrections FA", path: "/src/pages/corrections/index-corrections-fa.html", status: "ready" },
    { section: "Corrections", name: "Correction Impression 3D", path: "/src/pages/corrections/correction-impression3d.html", status: "ready" },
    { section: "Corrections", name: "Correction Réparabilité", path: "/src/pages/corrections/correction-reparabilite.html", status: "ready" },

    // ── Flashcards ─────────────────────────────────────────
    { section: "Flashcards", name: "Index Flashcards", path: "/src/pages/flashcards/flashcards.html", status: "ready" },
    { section: "Flashcards", name: "Réparabilité", path: "/src/pages/flashcards/reparabilite.html", status: "ready" },
    { section: "Flashcards", name: "Modélisation 3D", path: "/src/pages/flashcards/modelisation3d.html", status: "ready" },

    // ── Projets ────────────────────────────────────────────
    { section: "Projets", name: "Cahier des charges interactif", path: "/src/pages/projets/cahier-des-charges-interactif.html", status: "ready" },
    { section: "Projets", name: "Conception objet technique", path: "/src/pages/projets/conception-objet-technique.html", status: "ready" },

    // ── Quiz ───────────────────────────────────────────────
    { section: "Quiz", name: "Quiz Modélisation 3D", path: "/src/pages/quiz/quiz-modelisation-3d.html", status: "ready" },
    { section: "Quiz", name: "Quiz Réparabilité", path: "/src/pages/quiz/quiz-reparabilite.html", status: "ready" },

    // ── Outils ─────────────────────────────────────────────
    { section: "Outils", name: "Tinkercad Classes", path: "/src/pages/outils/tinkercad-classes.html", status: "ready" },
    { section: "Outils", name: "Mini-Slicer 3D", path: "/src/pages/outils/mini-slicer-3d.html", status: "ready" },
    { section: "Outils", name: "Task Manager", path: "/src/pages/outils/task-manager.html", status: "ready" },    

    // ── Ressources ─────────────────────────────────────────
    { section: "Ressources", name: "Ressources", path: "/src/pages/ressources/ressources.html", status: "ready" },

    // ══════════════════════════════════════════════════════════
    //  NOUVELLES PAGES (ajouter ici ↓)
    { section: "Ressources", name: "Fiche Outil — Plume & Toupie", path: "/src/pages/ressources/outil-plume-et-toupie.html", status: "ready" },
    { section: "Ressources", name: "Guide Ultra-Simplifié Tinkercad", path: "/src/pages/ressources/guide-tinkercad-simplifie.html", status: "ready" },
    // ══════════════════════════════════════════════════════════

    // { section: "Cours", name: "Internet & Réseaux", path: "/src/pages/cours/internet-reseaux.html", status: "wip", tag: "new" },

];

// ── Render ─────────────────────────────────────────────────

function render(filter = "") {
    const container = document.getElementById("devContent");
    const lowerFilter = filter.toLowerCase();

    // Group by section
    const sections = {};
    PAGES.forEach(p => {
        if (!sections[p.section]) sections[p.section] = [];
        sections[p.section].push(p);
    });

    container.innerHTML = "";

    let totalVisible = 0;

    Object.entries(sections).forEach(([sectionName, pages]) => {
        const filtered = pages.filter(p =>
            p.name.toLowerCase().includes(lowerFilter) ||
            p.path.toLowerCase().includes(lowerFilter) ||
            sectionName.toLowerCase().includes(lowerFilter)
        );

        const sec = document.createElement("div");
        sec.className = "dev-section" + (filtered.length === 0 ? " hidden" : "");

        const title = document.createElement("div");
        title.className = "dev-section__title";
        title.textContent = `${sectionName} (${filtered.length})`;
        sec.appendChild(title);

        const list = document.createElement("ul");
        list.className = "dev-list";

        filtered.forEach(p => {
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.className = "dev-link";
            a.href = p.path;

            // Status dot
            const dot = document.createElement("span");
            dot.className = `dev-link__status dev-link__status--${p.status || "ready"}`;
            a.appendChild(dot);

            // Name
            const name = document.createElement("span");
            name.textContent = p.name;
            a.appendChild(name);

            // Tag
            if (p.tag) {
                const tag = document.createElement("span");
                tag.className = `dev-link__tag dev-link__tag--${p.tag}`;
                tag.textContent = p.tag;
                a.appendChild(tag);
            }

            // Path
            const path = document.createElement("span");
            path.className = "dev-link__path";
            path.textContent = p.path;
            a.appendChild(path);

            li.appendChild(a);
            list.appendChild(li);
        });

        totalVisible += filtered.length;
        sec.appendChild(list);
        container.appendChild(sec);
    });

    // Stats
    const stats = document.getElementById("devStats");
    const wip = PAGES.filter(p => p.status === "wip").length;
    const broken = PAGES.filter(p => p.status === "broken").length;
    stats.innerHTML = "";

    const items = [
        { label: "Pages", value: PAGES.length },
        { label: "Sections", value: Object.keys(sections).length },
    ];
    if (wip) items.push({ label: "WIP", value: wip });
    if (broken) items.push({ label: "Broken", value: broken });
    if (filter) items.push({ label: "Filtrées", value: totalVisible });

    items.forEach(item => {
        const span = document.createElement("span");
        span.className = "dev-stats__item";
        const strong = document.createElement("strong");
        strong.textContent = item.value;
        span.appendChild(strong);
        span.append(` ${item.label}`);
        stats.appendChild(span);
    });
}

// ── Filter & Keyboard ──────────────────────────────────────

const filterInput = document.getElementById("filterInput");
filterInput.addEventListener("input", () => render(filterInput.value));

// Keyboard nav: ↑↓ to highlight, Enter to open
let focusIdx = -1;

document.addEventListener("keydown", (e) => {
    const links = [...document.querySelectorAll(".dev-link:not(.hidden)")];
    if (!links.length) return;

    if (e.key === "ArrowDown") {
        e.preventDefault();
        focusIdx = Math.min(focusIdx + 1, links.length - 1);
        links[focusIdx]?.focus();
    } else if (e.key === "ArrowUp") {
        e.preventDefault();
        focusIdx = Math.max(focusIdx - 1, 0);
        links[focusIdx]?.focus();
    } else if (e.key === "Enter" && document.activeElement.classList.contains("dev-link")) {
        // Let the browser follow the link naturally
    } else if (e.key === "Escape") {
        filterInput.value = "";
        filterInput.focus();
        focusIdx = -1;
        render();
    }
});

// ── Init ───────────────────────────────────────────────────
render();
</script>

</body>
</html>