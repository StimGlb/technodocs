<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Bilan de s√©quence Conception 3D - TechnoDocs"
    />
    <title>Bilan Conception 3D | TechnoDocs</title>

    <!-- CSS du projet -->
    <link rel="stylesheet" href="/src/css/style.css" />
    <link rel="stylesheet" href="/src/css/wizard.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* Styles sp√©cifiques pour le mot de passe */
      .password-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }
      .password-prompt {
        background-color: var(--color-white);
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        text-align: center;
        max-width: 400px;
        width: 90%;
      }
      .password-prompt h2 {
        color: var(--color-primary-700);
        margin-bottom: 1.5rem;
        font-size: 1.8rem;
      }
      .password-prompt input[type="password"] {
        width: calc(100% - 2rem);
        padding: 0.75rem 1rem;
        margin-bottom: 1rem;
        border: 1px solid var(--color-gray-300);
        border-radius: 4px;
        font-size: 1rem;
      }
      .password-prompt button {
        background-color: var(--color-primary-500);
        color: var(--color-white);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.2s ease;
      }
      .password-prompt button:hover {
        background-color: var(--color-primary-600);
      }
      .password-prompt .error-message {
        color: var(--color-error);
        margin-top: 0.5rem;
        font-size: 0.9rem;
      }

      /* ‚îÄ‚îÄ‚îÄ Styles sp√©cifiques au bilan ‚îÄ‚îÄ‚îÄ */
      .quiz-question {
        background: var(--color-gray-50, #f9fafb);
        border: 1px solid var(--color-gray-200, #e5e7eb);
        border-radius: 8px;
        padding: 1.25rem 1.5rem;
        margin-bottom: 1.25rem;
        transition: border-color 0.2s ease;
      }
      .quiz-question:hover {
        border-color: var(--color-primary-300, #93c5fd);
      }
      .quiz-question__number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: var(--color-primary-500, #3b82f6);
        color: white;
        font-size: 0.8rem;
        font-weight: 700;
        margin-right: 0.5rem;
        flex-shrink: 0;
      }
      .quiz-question__text {
        font-weight: 600;
        font-size: 0.95rem;
        color: var(--color-gray-800, #1f2937);
        margin-bottom: 0.75rem;
        display: flex;
        align-items: flex-start;
        gap: 0.25rem;
        line-height: 1.5;
      }
      .quiz-question__hint {
        font-size: 0.82rem;
        color: var(--color-gray-500, #6b7280);
        margin-bottom: 0.75rem;
        padding-left: 2.25rem;
        font-style: italic;
      }

      /* Radio & Checkbox groups */
      .quiz-options {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding-left: 2.25rem;
      }
      .quiz-option {
        display: flex;
        align-items: center;
        gap: 0.6rem;
        padding: 0.5rem 0.75rem;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.15s ease;
        font-size: 0.9rem;
      }
      .quiz-option:hover {
        background: var(--color-primary-50, #eff6ff);
      }
      .quiz-option input[type="radio"],
      .quiz-option input[type="checkbox"] {
        accent-color: var(--color-primary-500, #3b82f6);
        width: 16px;
        height: 16px;
        cursor: pointer;
      }
      .quiz-option label {
        cursor: pointer;
        flex: 1;
      }

      /* Textarea inside quiz */
      .quiz-textarea {
        width: 100%;
        min-height: 80px;
        padding: 0.75rem 1rem;
        border: 1px solid var(--color-gray-300, #d1d5db);
        border-radius: 6px;
        font-family: inherit;
        font-size: 0.9rem;
        resize: vertical;
        margin-left: 2.25rem;
        width: calc(100% - 2.25rem);
        transition: border-color 0.2s ease;
      }
      .quiz-textarea:focus {
        outline: none;
        border-color: var(--color-primary-500, #3b82f6);
        box-shadow: 0 0 0 3px var(--color-primary-100, #dbeafe);
      }

      /* Select inside quiz */
      .quiz-select {
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--color-gray-300, #d1d5db);
        border-radius: 6px;
        font-family: inherit;
        font-size: 0.9rem;
        margin-left: 2.25rem;
        min-width: 250px;
        cursor: pointer;
      }
      .quiz-select:focus {
        outline: none;
        border-color: var(--color-primary-500, #3b82f6);
      }

      /* Matching / association */
      .quiz-matching {
        padding-left: 2.25rem;
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
      }
      .quiz-matching__row {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        flex-wrap: wrap;
      }
      .quiz-matching__label {
        font-weight: 600;
        font-size: 0.88rem;
        min-width: 160px;
        color: var(--color-gray-700, #374151);
      }
      .quiz-matching__arrow {
        color: var(--color-gray-400, #9ca3af);
        font-size: 1.1rem;
      }
      .quiz-matching select {
        padding: 0.45rem 0.65rem;
        border: 1px solid var(--color-gray-300, #d1d5db);
        border-radius: 6px;
        font-family: inherit;
        font-size: 0.85rem;
        min-width: 220px;
        cursor: pointer;
      }

      /* Phase progress indicator */
      .phase-progress {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
      }
      .phase-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--color-gray-300, #d1d5db);
        transition: background 0.3s ease;
      }
      .phase-dot.active {
        background: var(--color-primary-500, #3b82f6);
        transform: scale(1.2);
      }
      .phase-dot.completed {
        background: var(--color-success, #22c55e);
      }
    </style>
  </head>
  <body>
    <!-- Overlay pour le mot de passe -->
    <div id="passwordOverlay" class="password-overlay">
      <div class="password-prompt">
        <h2>üîí Acc√®s s√©curis√©</h2>
        <p>Veuillez entrer le mot de passe pour acc√©der au bilan.</p>
        <input type="password" id="passwordInput" placeholder="Mot de passe" />
        <button onclick="checkPassword()">Acc√©der</button>
        <p id="errorMessage" class="error-message" style="display: none">
          Mot de passe incorrect.
        </p>
      </div>
    </div>

    <!-- Header dynamique -->
    <div id="header-placeholder"></div>

    <main class="wizard" style="display: none">

      <!-- ========== BANNI√àRE TITRE ========== -->
      <div class="wizard__banner">
        <div class="wizard__banner-icon">üéØ</div>
        <div class="wizard__banner-content">
          <h1 class="wizard__banner-title">Bilan ‚Äî Conception & Impression 3D</h1>
          <div class="wizard__banner-skills">
            <span class="wizard__skill">Vocabulaire & Culture</span>
            <span class="wizard__skill">Ma√Ætrise de Tinkercad</span>
            <span class="wizard__skill">Logique de Conception</span>
            <span class="wizard__skill">Cha√Æne Num√©rique</span>
          </div>
        </div>
      </div>

      <!-- ========== INFO √âL√àVE ========== -->
      <div class="wizard__student-info">
        <div class="wizard__student-row">
          <div class="wizard__student-field wizard__student-field--name">
            <label for="studentName">Pr√©nom et Nom</label>
            <input
              type="text"
              id="studentName"
              data-field="studentName"
              placeholder=""
            />
          </div>
          <div class="wizard__student-field wizard__student-field--class">
            <label for="studentClass">Classe</label>
            <select id="studentClass" data-field="studentClass">
              <option value="">‚Äî S√©lectionner ‚Äî</option>
              <optgroup label="5√®me">
                <option value="505">5√®me 5</option>
                <option value="506">5√®me 6</option>
                <option value="507">5√®me 7</option>
              </optgroup>
            </select>
          </div>
          <div class="wizard__student-field wizard__student-field--date">
            <label>Date</label>
            <span
              class="wizard__date-display"
              id="projectDate"
              data-field="projectDate"
            ></span>
          </div>
        </div>
      </div>

      <!-- ========== CONTENEUR FORMULAIRE ========== -->
      <div class="wizard__container">

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             PHASE 1 ‚Äî Vocabulaire & Culture 3D
             ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard__phase active" data-phase="1">
          <div class="wizard__phase-header">
            <div class="wizard__phase-icon">üìö</div>
            <h2 class="wizard__phase-title">Vocabulaire & Culture 3D</h2>
            <p class="wizard__phase-subtitle">
              V√©rifie que tu ma√Ætrises les termes essentiels de l'impression 3D.
            </p>
          </div>

          <!-- Q1 ‚Äî QCM -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">1</span>
              Que signifie le sigle FFF (ou FDM) en impression 3D ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q1" id="q1a" value="a" data-field="q1" />
                <label for="q1a">Fabrication par Fusion de Filament</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q1" id="q1b" value="b" data-field="q1" />
                <label for="q1b">Formation de Formes Finales</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q1" id="q1c" value="c" data-field="q1" />
                <label for="q1c">Fichier de Fabrication Format√©</label>
              </div>
            </div>
          </div>

          <!-- Q2 ‚Äî QCM -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">2</span>
              Qui a invent√© la premi√®re technologie d'impression 3D (SLA) en 1984 ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q2" id="q2a" value="a" data-field="q2" />
                <label for="q2a">Steve Jobs</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q2" id="q2b" value="b" data-field="q2" />
                <label for="q2b">Charles W. Hull</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q2" id="q2c" value="c" data-field="q2" />
                <label for="q2c">Tim Berners-Lee</label>
              </div>
            </div>
          </div>

          <!-- Q3 ‚Äî Association -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">3</span>
              Associe chaque domaine √† un exemple d'objet imprim√© en 3D :
            </div>
            <div class="quiz-matching">
              <div class="quiz-matching__row">
                <span class="quiz-matching__label">üè≠ Industrie</span>
                <span class="quiz-matching__arrow">‚Üí</span>
                <select data-field="q3_industrie">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="prototypes">Prototypes et pi√®ces d√©tach√©es</option>
                  <option value="figurines">Figurines et accessoires de cosplay</option>
                  <option value="objets_perso">Objets personnalis√©s pour la maison</option>
                </select>
              </div>
              <div class="quiz-matching__row">
                <span class="quiz-matching__label">üéÆ Loisirs</span>
                <span class="quiz-matching__arrow">‚Üí</span>
                <select data-field="q3_loisirs">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="prototypes">Prototypes et pi√®ces d√©tach√©es</option>
                  <option value="figurines">Figurines et accessoires de cosplay</option>
                  <option value="objets_perso">Objets personnalis√©s pour la maison</option>
                </select>
              </div>
              <div class="quiz-matching__row">
                <span class="quiz-matching__label">üè† Maison</span>
                <span class="quiz-matching__arrow">‚Üí</span>
                <select data-field="q3_maison">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="prototypes">Prototypes et pi√®ces d√©tach√©es</option>
                  <option value="figurines">Figurines et accessoires de cosplay</option>
                  <option value="objets_perso">Objets personnalis√©s pour la maison</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Navigation -->
          <div class="wizard__phase-nav">
            <div></div>
            <button class="btn btn--primary" onclick="wizardNextPhase()">
              Suivant ‚Üí
            </button>
          </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             PHASE 2 ‚Äî Ma√Ætrise de Tinkercad
             ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard__phase" data-phase="2">
          <div class="wizard__phase-header">
            <div class="wizard__phase-icon">üõ†Ô∏è</div>
            <h2 class="wizard__phase-title">Ma√Ætrise de Tinkercad</h2>
            <p class="wizard__phase-subtitle">
              Montre que tu sais utiliser l'interface et les outils.
            </p>
          </div>

          <!-- Q4 ‚Äî QCM -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">4</span>
              Dans Tinkercad, √† quoi sert le bouton ¬´ Grouper ¬ª (Ctrl + G) ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q4" id="q4a" value="a" data-field="q4" />
                <label for="q4a">Sauvegarder le projet</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q4" id="q4b" value="b" data-field="q4" />
                <label for="q4b">Fusionner plusieurs formes en un seul objet (et appliquer les per√ßages)</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q4" id="q4c" value="c" data-field="q4" />
                <label for="q4c">Dupliquer une forme</label>
              </div>
            </div>
          </div>

          <!-- Q5 ‚Äî QCM -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">5</span>
              Comment creuser un trou dans un objet sur Tinkercad ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q5" id="q5a" value="a" data-field="q5" />
                <label for="q5a">On utilise la gomme dans la barre d'outils</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q5" id="q5b" value="b" data-field="q5" />
                <label for="q5b">On place une forme en mode ¬´ Per√ßage ¬ª, on la positionne, puis on groupe</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q5" id="q5c" value="c" data-field="q5" />
                <label for="q5c">On dessine le trou √† la main avec la souris</label>
              </div>
            </div>
          </div>

          <!-- Q6 ‚Äî Association raccourcis -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">6</span>
              Associe chaque raccourci √† sa fonction :
            </div>
            <div class="quiz-matching">
              <div class="quiz-matching__row">
                <span class="quiz-matching__label">‚å®Ô∏è Ctrl + G</span>
                <span class="quiz-matching__arrow">‚Üí</span>
                <select data-field="q6_ctrlg">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="grouper">Grouper les formes</option>
                  <option value="aligner">Aligner les objets</option>
                  <option value="poser">Poser sur le plan</option>
                </select>
              </div>
              <div class="quiz-matching__row">
                <span class="quiz-matching__label">‚å®Ô∏è Touche L</span>
                <span class="quiz-matching__arrow">‚Üí</span>
                <select data-field="q6_l">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="grouper">Grouper les formes</option>
                  <option value="aligner">Aligner les objets</option>
                  <option value="poser">Poser sur le plan</option>
                </select>
              </div>
              <div class="quiz-matching__row">
                <span class="quiz-matching__label">‚å®Ô∏è Touche D</span>
                <span class="quiz-matching__arrow">‚Üí</span>
                <select data-field="q6_d">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="grouper">Grouper les formes</option>
                  <option value="aligner">Aligner les objets</option>
                  <option value="poser">Poser sur le plan</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Q7 ‚Äî QCM Plume vs Toupie -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">7</span>
              Quel outil Tinkercad choisirais-tu pour dessiner un logo √† main lev√©e et le transformer en objet 3D ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q7" id="q7a" value="a" data-field="q7" />
                <label for="q7a">‚úèÔ∏è Plume (Scribble) ‚Äî dessin libre extrud√©</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q7" id="q7b" value="b" data-field="q7" />
                <label for="q7b">üåÄ Toupie (Shape Generators) ‚Äî formes param√©triques</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q7" id="q7c" value="c" data-field="q7" />
                <label for="q7c">Le Cube de Vue</label>
              </div>
            </div>
          </div>

          <!-- Navigation -->
          <div class="wizard__phase-nav">
            <button class="btn btn--secondary" onclick="wizardPrevPhase()">
              ‚Üê Pr√©c√©dent
            </button>
            <button class="btn btn--primary" onclick="wizardNextPhase()">
              Suivant ‚Üí
            </button>
          </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             PHASE 3 ‚Äî Logique de Conception & Cha√Æne Num√©rique
             ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard__phase" data-phase="3">
          <div class="wizard__phase-header">
            <div class="wizard__phase-icon">‚õìÔ∏è</div>
            <h2 class="wizard__phase-title">Logique de Conception & Cha√Æne Num√©rique</h2>
            <p class="wizard__phase-subtitle">
              Comprends le parcours complet de l'id√©e √† l'objet imprim√©.
            </p>
          </div>

          <!-- Q8 ‚Äî Remettre en ordre -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">8</span>
              Remets dans l'ordre les √©tapes de la cha√Æne num√©rique, du d√©but √† la fin :
            </div>
            <div class="quiz-question__hint">
              Num√©rote de 1 (premi√®re √©tape) √† 5 (derni√®re √©tape).
            </div>
            <div class="quiz-matching">
              <div class="quiz-matching__row">
                <select data-field="q8_tranchage" style="min-width: 60px; width: 70px;">
                  <option value="">‚Äî</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
                <span class="quiz-matching__label">üî™ Tranchage (slicer)</span>
              </div>
              <div class="quiz-matching__row">
                <select data-field="q8_modelisation" style="min-width: 60px; width: 70px;">
                  <option value="">‚Äî</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
                <span class="quiz-matching__label">üñ•Ô∏è Mod√©lisation 3D (Tinkercad)</span>
              </div>
              <div class="quiz-matching__row">
                <select data-field="q8_impression" style="min-width: 60px; width: 70px;">
                  <option value="">‚Äî</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
                <span class="quiz-matching__label">üñ®Ô∏è Impression 3D</span>
              </div>
              <div class="quiz-matching__row">
                <select data-field="q8_croquis" style="min-width: 60px; width: 70px;">
                  <option value="">‚Äî</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
                <span class="quiz-matching__label">‚úèÔ∏è Croquis / Id√©e sur papier</span>
              </div>
              <div class="quiz-matching__row">
                <select data-field="q8_export" style="min-width: 60px; width: 70px;">
                  <option value="">‚Äî</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
                <span class="quiz-matching__label">üíæ Export STL</span>
              </div>
            </div>
          </div>

          <!-- Q9 ‚Äî QCM cha√Æne d'information -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">9</span>
              Dans une imprimante 3D FFF, quel √©l√©ment fait partie de la cha√Æne d'√©nergie ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q9" id="q9a" value="a" data-field="q9" />
                <label for="q9a">Le capteur de fin de filament (sensor)</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q9" id="q9b" value="b" data-field="q9" />
                <label for="q9b">Le moteur pas-√†-pas qui d√©place la t√™te d'impression (actuator)</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q9" id="q9c" value="c" data-field="q9" />
                <label for="q9c">Le fichier G-code envoy√© √† la carte m√®re</label>
              </div>
            </div>
          </div>

          <!-- Q10 ‚Äî QCM contraintes impression -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">10</span>
              Quelle est l'√©paisseur minimale recommand√©e pour qu'une pi√®ce soit imprimable sans casser ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q10" id="q10a" value="a" data-field="q10" />
                <label for="q10a">0,5 mm</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q10" id="q10b" value="b" data-field="q10" />
                <label for="q10b">2 mm</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q10" id="q10c" value="c" data-field="q10" />
                <label for="q10c">10 mm</label>
              </div>
            </div>
          </div>

          <!-- Navigation -->
          <div class="wizard__phase-nav">
            <button class="btn btn--secondary" onclick="wizardPrevPhase()">
              ‚Üê Pr√©c√©dent
            </button>
            <button class="btn btn--primary" onclick="wizardNextPhase()">
              Suivant ‚Üí
            </button>
          </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             PHASE 4 ‚Äî Retour d'exp√©rience
             ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="wizard__phase" data-phase="4">
          <div class="wizard__phase-header">
            <div class="wizard__phase-icon">üí≠</div>
            <h2 class="wizard__phase-title">Retour d'exp√©rience</h2>
            <p class="wizard__phase-subtitle">
              Donne ton avis personnel sur le projet.
            </p>
          </div>

          <!-- Q11 ‚Äî Texte libre -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">11</span>
              D√©cris en quelques phrases l'objet utile que tu as con√ßu. √Ä quoi sert-il ? Pour qui ?
            </div>
            <textarea
              class="quiz-textarea"
              data-field="q11"
              placeholder="Mon objet est..."
            ></textarea>
          </div>

          <!-- Q12 ‚Äî Texte libre -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">12</span>
              Quelle a √©t√© la plus grande difficult√© que tu as rencontr√©e pendant la mod√©lisation ? Comment l'as-tu r√©solue ?
            </div>
            <textarea
              class="quiz-textarea"
              data-field="q12"
              placeholder="La difficult√© principale √©tait..."
            ></textarea>
          </div>

          <!-- Q13 ‚Äî Auto-√©valuation -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">13</span>
              Auto-√©valuation : comment te sens-tu sur Tinkercad maintenant ?
            </div>
            <div class="quiz-options">
              <div class="quiz-option">
                <input type="radio" name="q13" id="q13a" value="a" data-field="q13" />
                <label for="q13a">üü¢ √Ä l'aise ‚Äî je peux cr√©er un objet seul(e)</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q13" id="q13b" value="b" data-field="q13" />
                <label for="q13b">üü° √áa va ‚Äî j'ai encore besoin d'un peu d'aide</label>
              </div>
              <div class="quiz-option">
                <input type="radio" name="q13" id="q13c" value="c" data-field="q13" />
                <label for="q13c">üî¥ Difficile ‚Äî j'aurais besoin de plus de pratique</label>
              </div>
            </div>
          </div>

          <!-- Q14 ‚Äî Texte libre -->
          <div class="quiz-question">
            <div class="quiz-question__text">
              <span class="quiz-question__number">14</span>
              Si tu pouvais recommencer le projet, que ferais-tu diff√©remment ?
            </div>
            <textarea
              class="quiz-textarea"
              data-field="q14"
              placeholder="Si je recommen√ßais, je..."
            ></textarea>
          </div>

          <!-- Navigation -->
          <div class="wizard__phase-nav">
            <button class="btn btn--secondary" onclick="wizardPrevPhase()">
              ‚Üê Pr√©c√©dent
            </button>
            <button class="btn btn--success" onclick="wizardComplete()">
              ‚úÖ Terminer le bilan
            </button>
          </div>
        </section>

      </div>

      <!-- ========== BARRE D'ACTIONS ========== -->
      <div class="wizard__actions">
        <button
          class="btn btn--secondary btn--small"
          onclick="wizardExportJSON()"
        >
          üì§ Exporter
        </button>
        <button
          class="btn btn--secondary btn--small"
          onclick="document.getElementById('importInput').click()"
        >
          üì• Importer
        </button>
        <input
          type="file"
          id="importInput"
          accept=".json"
          style="display: none"
          onchange="wizardImportJSON(event)"
        />
        <button
          class="btn btn--secondary btn--small"
          onclick="handleSafeReset()"
        >
          üóëÔ∏è R√©initialiser
        </button>
        <button class="btn btn--secondary btn--small" onclick="window.print()">
          üñ®Ô∏è Imprimer
        </button>
      </div>
    </main>

    <!-- Footer dynamique -->
    <div id="footer-placeholder"></div>

    <!-- ========== MODALES ========== -->

    <!-- Modal Compl√©tion -->
    <div class="wizard__modal-overlay" id="completionModal">
      <div class="wizard__modal">
        <h3 class="wizard__modal-title">üéâ Bilan termin√© !</h3>
        <div class="wizard__modal-content">
          <p>Bravo, tu as compl√©t√© le bilan de la s√©quence Conception 3D !</p>
          <p style="margin-top: 1rem">
            Tes r√©ponses ont √©t√© <strong>sauvegard√©es automatiquement</strong> dans
            la base de donn√©es.
          </p>
          <p
            style="
              margin-top: 0.75rem;
              font-size: 0.875rem;
              color: var(--color-gray-500);
            "
          >
            Tu peux aussi exporter une copie locale en JSON.
          </p>
        </div>
        <div class="wizard__modal-actions">
          <button
            class="btn btn--secondary"
            onclick="wizardCloseModal('completionModal')"
          >
            Fermer
          </button>
          <button
            class="btn btn--primary"
            onclick="
              wizardExportJSON();
              wizardCloseModal('completionModal');
            "
          >
            üì§ Exporter
          </button>
        </div>
      </div>
    </div>

    <!-- Modal Reset -->
    <div class="wizard__modal-overlay" id="resetModal">
      <div class="wizard__modal">
        <h3 class="wizard__modal-title">‚ö†Ô∏è R√©initialiser ?</h3>
        <div class="wizard__modal-content">
          <p>
            Une <strong>sauvegarde</strong> a √©t√© t√©l√©charg√©e automatiquement.
          </p>
          <p>
            Voulez-vous <strong>recommencer</strong> avec un formulaire vide ?
          </p>
        </div>
        <div class="wizard__modal-actions">
          <button
            class="btn btn--secondary"
            onclick="wizardCloseModal('resetModal')"
          >
            Annuler
          </button>
          <button
            class="btn btn--primary"
            style="background: var(--color-error)"
            onclick="wizardReset()"
          >
            üóëÔ∏è R√©initialiser
          </button>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div class="wizard__toast" id="wizardToast">
      <span class="wizard__toast-icon"></span>
      <span class="wizard__toast-message"></span>
    </div>

    <!-- ========== SCRIPTS ========== -->
    <script type="module" src="/src/js/components.js"></script>
    <script type="module">
      // ============================================
      // CONFIGURATION FIREBASE
      // ============================================
      import { WizardFirebase } from "/src/js/wizard-firebase.js";

      // Cr√©er l'instance du wizard avec Firestore
      window.wizardInstance = new WizardFirebase({
        // Nom de la collection Firestore (unique par formulaire)
        collectionName: "techno_bilan_conception3d",

        // Intervalle d'autosave (en ms)
        autosaveInterval: 15000,

        // Champs obligatoires par phase pour marquer "completed"
        requiredFields: {
          1: ["studentName", "studentClass", "q1", "q2", "q3_industrie", "q3_loisirs", "q3_maison"],
          2: ["q4", "q5", "q6_ctrlg", "q6_l", "q6_d", "q7"],
          3: ["q8_tranchage", "q8_modelisation", "q8_impression", "q8_croquis", "q8_export", "q9", "q10"],
          4: ["q11", "q12", "q13", "q14"],
        },

        // Callback √† la compl√©tion
        onComplete: (data) => {
          console.log("üéâ Bilan compl√©t√©:", data);
        },

        // Callback sauvegarde r√©ussie
        onSaveSuccess: (data) => {
          console.log("‚úÖ Sauvegarde Firestore OK");
        },

        // Callback erreur de sauvegarde
        onSaveError: (error) => {
          console.error("‚ùå Erreur Firestore:", error);
        },
      });

      /**
       * S√©curise la r√©initialisation en for√ßant un export JSON
       * avant de demander la confirmation de suppression.
       */
      window.handleSafeReset = function () {
        console.log(
          "Pr√©paration de la r√©initialisation : Export de secours...",
        );

        if (typeof wizardExportJSON === "function") {
          wizardExportJSON();
        } else if (window.wizardInstance) {
          window.wizardInstance.exportToJSON();
        }

        if (window.wizardInstance && window.wizardInstance.showToast) {
          window.wizardInstance.showToast(
            "Sauvegarde de secours t√©l√©charg√©e !",
            "success",
          );
        }

        wizardShowModal("resetModal");
      };

      // ============================================
      // LOGIQUE D'ACC√àS PAR MOT DE PASSE
      // ============================================
      import { CORRECT_PASSWORD } from "/src/js/wizard-config.js";

      window.checkPassword = function () {
        const passwordInput = document.getElementById("passwordInput");
        const errorMessage = document.getElementById("errorMessage");
        const passwordOverlay = document.getElementById("passwordOverlay");
        const mainContent = document.querySelector("main.wizard");

        if (passwordInput.value === CORRECT_PASSWORD) {
          passwordOverlay.style.display = "none";
          mainContent.style.display = "block";
          errorMessage.style.display = "none";
          if (window.wizardInstance) {
            window.wizardInstance.init();
          }
        } else {
          errorMessage.style.display = "block";
          passwordInput.value = "";
        }
      };

      // Permettre l'acc√®s par la touche Entr√©e
      document
        .getElementById("passwordInput")
        .addEventListener("keypress", function (event) {
          if (event.key === "Enter") {
            event.preventDefault();
            checkPassword();
          }
        });
    </script>
  </body>
</html>