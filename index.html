<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Ressources de Technologie pour les coll√©giens - Cours, outils et exercices interactifs"
    />
    <title>Techno Docs | Accueil</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="stylesheet" href="/src/css/style.css" />
    <!-- Google Fonts - Police moderne et lisible -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header avec navigation -->
    <div id="header-placeholder"></div>

    <main>
      <!-- Hero Section -->
      <section class="hero">
        <!-- Shapes d√©coratives en arri√®re-plan -->
        <div class="hero__shapes" aria-hidden="true">
          <div class="shape shape--1"></div>
          <div class="shape shape--2"></div>
          <div class="shape shape--3"></div>
          <div class="shape shape--4"></div>
          <div class="shape shape--5"></div>
        </div>

        <!-- Contenu principal -->
        <div class="hero__inner">
          <div class="hero__content">
            <span class="hero__badge">üöÄ Technologie au coll√®ge</span>
            <h1 class="hero__title">
              Bienvenue sur <span class="highlight">TechnoDocs</span>
            </h1>
            <p class="hero__subtitle">
              <span class="typing__cursor">
                Acc√©dez au contenu des Cours, aux Activit√©s en ligne,<br />
                aux Corrections, aux Flashcards pour r√©viser et aux Outils.
              </span>
              <span class="typing__static"></span>
            </p>
            <div class="hero__actions">
              <!-- <a
                href="/src/pages/activites/devoirs.html"
                class="btn btn--primary"
              >
                <span>üìã</span> Activit√©s
              </a> -->
              <a
                href="/src/pages/ressources/ressources.html"
                class="btn btn--tertiary"
              >
                <span>üìÅ</span> Ressources
              </a>
              <a href="#revisions" class="btn btn--secondary">
                <span>üß†</span> R√©visions
              </a>
            </div>
          </div>
          <!-- Image d√©corative (d√©sactiv√©e : hero-illustration.png manquant) -->
          <!-- <div class="hero__visual">
                    <img src="/src/assets/images/hero-illustration.png" alt="" class="hero__image" aria-hidden="true">
                </div> -->
        </div>
      </section>

      <!-- Section Cours -->
      <section id="cours" class="section">
        <div class="section__header">
          <h2 class="section__title">üìö Cours</h2>
          <p class="section__description">
            Acc√®de aux documents et supports visuels
          </p>
        </div>

        <div class="cards-grid" id="flashcard-category-grid">
          <!-- Les cat√©gories seront charg√©es ici par JS (g√©n√©r√© depuis src/data/navigation.json) -->
        </div>
      </section>
      <!-- Section R√©visions -->
      <section id="revisions" class="section">
        <div class="section__header">
          <h2 class="section__title">üß† R√©visions</h2>
          <p class="section__description">
            Flashcards et fiches pour apprendre
          </p>
        </div>

        <div class="revision-grid">
          <a
            href="/src/pages/flashcards/flashcards.html"
            class="revision-card revision-card--flashcards"
          >
            <div class="revision-card__icon">üóíÔ∏è</div>
            <h3 class="revision-card__title">Flashcards</h3>
            <p class="revision-card__text">
              R√©vise avec les cartes interactives
            </p>
          </a>
        </div>
      </section>

      <!-- Section Corrections -->
      <section id="corrections" class="section">
        <div class="section__header">
          <h2 class="section__title">üìù Corrections</h2>
          <p class="section__description">
            Toutes les corrections des activit√©s et √©valuations
          </p>
        </div>

        <div class="correction-grid">
          <!-- Corrections will be rendered here from /data/navigation.json -->
        </div>
      </section>
      <!-- Section Outils -->
      <section id="outils" class="section section--alt">
        <div class="section__header">
          <h2 class="section__title">üõ†Ô∏è Outils Num√©riques</h2>
          <p class="section__description">
            Acc√®s direct aux plateformes de cr√©ation
          </p>
        </div>

        <div class="tools-grid" id="tools-grid">
          <!-- Outils: rendered dynamically from /data/navigation.json -->
        </div>
      </section>
    </main>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script type="module">
      // G√©n√©ration dynamique des cartes "Cours" depuis src/data/navigation.json
      (async function () {
        try {
          const res = await fetch("/data/navigation.json");
          if (!res.ok) return;
          const nav = await res.json();
          const courses = nav.cours || [];
          const container = document.getElementById("flashcard-category-grid");
          if (!container) return;
          container.innerHTML = "";
          courses
            .filter((i) => i.visible !== false)
            .forEach((item) => {
              const a = document.createElement("a");
              a.className = "card card--cours";

              const raw = item.path || item.url || "";
              let href = raw;
              if (!href.match(/^https?:\/\//i) && !href.startsWith("/"))
                href = raw;
              a.setAttribute("href", href || "#");

              if (item.icon && item.icon.value) {
                const icon = document.createElement("div");
                icon.className = "card__icon";
                icon.textContent = item.icon.value;
                a.appendChild(icon);
              }

              const h3 = document.createElement("h3");
              h3.className = "card__title";
              h3.textContent = item.name || "";
              a.appendChild(h3);

              if (item.description) {
                const p = document.createElement("p");
                p.className = "card__text";
                p.textContent = item.description;
                a.appendChild(p);
              }

              container.appendChild(a);
            });

          // Render corrections dynamically
          const corrections = nav.corrections || [];
          const correctionsContainer =
            document.querySelector(".correction-grid");
          if (correctionsContainer) {
            correctionsContainer.innerHTML = "";
            corrections
              .filter((i) => i.visible !== false)
              .forEach((item) => {
                const a = document.createElement("a");
                a.className = "correction-card";

                const raw = item.path || item.url || "";
                let href = raw;
                if (!href.match(/^https?:\/\//i) && !href.startsWith("/"))
                  href = raw;
                a.setAttribute("href", href || "#");

                if (item.icon && item.icon.value) {
                  const icon = document.createElement("div");
                  icon.className = "correction-card__icon";
                  icon.textContent = item.icon.value;
                  a.appendChild(icon);
                }

                const h3 = document.createElement("h3");
                h3.className = "correction-card__title";
                h3.textContent = item.name || "";
                a.appendChild(h3);

                if (item.description) {
                  const p = document.createElement("p");
                  p.className = "correction-card__text";
                  p.textContent = item.description;
                  a.appendChild(p);
                }

                correctionsContainer.appendChild(a);
              });
          }

          // Render outils dynamically
          const outils = nav.outils || [];
          const outilsContainer =
            document.getElementById("tools-grid") ||
            document.querySelector(".tools-grid");
          if (outilsContainer) {
            outilsContainer.innerHTML = "";
            outils
              .filter((i) => i.visible !== false)
              .forEach((item) => {
                const raw = item.path || item.url || "";
                let href = raw || "#";
                if (!href.match(/^https?:\/\//i) && !href.startsWith("/"))
                  href = "/" + href;

                const a = document.createElement("a");
                a.className = "tool-card";
                a.setAttribute("href", href || "#");

                // open external links in new tab
                if (
                  item.external === true ||
                  (item.path && item.path.startsWith("src/pages/outils"))
                ) {
                  a.setAttribute("target", "_blank");
                  a.setAttribute("rel", "noopener");
                }

                // Special-case Tinkercad to use logo image when available
                if (item.id === "tinkercad-classes") {
                  const img = document.createElement("img");
                  img.className = "selector-icon";
                  img.src = "/src/images/logo-tinkercad.png";
                  img.alt = item.name || "Tinkercad";
                  a.appendChild(img);
                } else if (item.icon && item.icon.value) {
                  const logo = document.createElement("div");
                  logo.className = "tool-card__logo";
                  logo.textContent = item.icon.value;
                  a.appendChild(logo);
                }

                const name = document.createElement("span");
                name.className = "tool-card__name";
                name.textContent = item.name || "";
                a.appendChild(name);

                if (item.description) {
                  const tag = document.createElement("span");
                  tag.className = "tool-card__tag";
                  tag.textContent = item.description;
                  a.appendChild(tag);
                }

                outilsContainer.appendChild(a);
              });
          }
        } catch (e) {
          // silent fail on missing navigation.json
        }
      })();
    </script>
    <script type="module" src="/src/js/components.js"></script>
    <script type="module" src="/src/js/app.js"></script>
    <script type="module" src="/src/js/main.js"></script>
  </body>
</html>